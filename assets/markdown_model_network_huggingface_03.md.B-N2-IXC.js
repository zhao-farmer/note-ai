import{_ as s,c as a,o as t,a0 as l}from"./chunks/framework.DqNHTjo5.js";const r=JSON.parse('{"title":"三、下载文件","description":"","frontmatter":{},"headers":[],"relativePath":"markdown/model/network/huggingface/03.md","filePath":"markdown/model/network/huggingface/03.md"}'),e={name:"markdown/model/network/huggingface/03.md"};function h(n,i,p,k,d,o){return t(),a("div",null,i[0]||(i[0]=[l('<h1 id="三、下载文件" tabindex="-1">三、下载文件 <a class="header-anchor" href="#三、下载文件" aria-label="Permalink to &quot;三、下载文件&quot;">​</a></h1><h2 id="_3-1-安装huggingface-cli与设置镜像" tabindex="-1">3.1 安装huggingface-cli与设置镜像 <a class="header-anchor" href="#_3-1-安装huggingface-cli与设置镜像" aria-label="Permalink to &quot;3.1 安装huggingface-cli与设置镜像&quot;">​</a></h2><p>huggingface-cli 是 Hugging Face 官方提供的命令行工具，自带完善的下载功能。</p><ol><li>安装依赖</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">pip</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> install</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -U</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> huggingface_hub</span></span></code></pre></div><ol start="2"><li>设置环境变量</li></ol><ul><li>linux</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HF_ENDPOINT</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">https://hf-mirror.com</span></span></code></pre></div><ul><li>Windows Powershell</li></ul><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">$env:HF_ENDPOINT = </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://hf-mirror.com&quot;</span></span></code></pre></div><blockquote><p>注意：上述配置环境变量代码，每次下载前均需要配置。可以理解为配置下载对应文件时候要使用的源。如果要避免这个情况，请将上面这一行写入Linux中的 ~/.bashrc。Windows环境没测试过。</p></blockquote><h2 id="_3-2-下载命令与命令解释" tabindex="-1">3.2 下载命令与命令解释 <a class="header-anchor" href="#_3-2-下载命令与命令解释" aria-label="Permalink to &quot;3.2 下载命令与命令解释&quot;">​</a></h2><h3 id="_3-2-1-下载" tabindex="-1">3.2.1 下载 <a class="header-anchor" href="#_3-2-1-下载" aria-label="Permalink to &quot;3.2.1 下载&quot;">​</a></h3><ol><li>下载指定的模型</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">huggingface-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> download</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --resume-download</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gpt2</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --local-dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> gpt2</span></span></code></pre></div><ol start="2"><li>下载指定的数据集</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">huggingface-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> download</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --repo-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dataset</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --resume-download</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wikitext</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --local-dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wikitext</span></span></code></pre></div><h3 id="_3-2-2-命令行" tabindex="-1">3.2.2 命令行 <a class="header-anchor" href="#_3-2-2-命令行" aria-label="Permalink to &quot;3.2.2 命令行&quot;">​</a></h3><ol><li>下载全部文件，需要添加--resume-download参数，此时将保存至/root/.cache/.../文件夹中</li><li>当需要下载指定文件夹中，需要添加--local-dir参数，此时将保存至wikitext文件夹中</li><li>当需要下载指定文件时，使用如下命令：</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">huggingface-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> download</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --repo-type</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> dataset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 指定数据目录</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 指定特定文件</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --local-dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wikitext</span></span></code></pre></div><ol start="4"><li>当下载多个文件，且非数据文件时候，使用如下命令：</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">huggingface-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> download</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 指定数据目录</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 指定文件A</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 指定文件B</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 指定文件C</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --local-dir</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> wikitext</span></span></code></pre></div><ol start="5"><li>当想下载一个仓库的文件，一部分内容不下载，使用参数--include和--exclude命令，如下：</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">huggingface-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> download</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 指定数据目录</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;*.safetensors&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --exclude</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;*.bin&quot;</span></span></code></pre></div><p>表示下载指定数据目录，以safetensors结尾的，不下载.bin结尾的文件。</p><p>为什么会要这么做，tmd下载一半电脑挂了，头大。</p><ol start="6"><li>当下载时候需要token，则添加参数--token，命令如下：</li></ol><div class="language-sh vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">huggingface-cli</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> download</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> 指定数据目录</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --include</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;*.safetensors&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --exclude</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;*.bin&quot;</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --token</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> hf_</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">****</span></span></code></pre></div><blockquote><p>注意：使用wget命令并不会得到下载好的大文件内容，这点需要注意。</p></blockquote>',29)]))}const c=s(e,[["render",h]]);export{r as __pageData,c as default};
